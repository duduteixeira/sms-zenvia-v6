/*! postmonger v0.0.24 */
(function(root,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):root.Postmonger=factory()})(this,function(){"use strict";function Session(){this._started=!1,this._listeners={},this._pendingEvents=[],this._connectionReadyHandler=null}return Session.prototype={trigger:function(name,data){window.parent.postMessage({type:"sfmc:event",payload:{name:name,data:data}},"*")},on:function(name,handler){this._listeners[name]=this._listeners[name]||[],this._listeners[name].push(handler)},off:function(name,handler){if(this._listeners[name]){var idx=this._listeners[name].indexOf(handler);idx>-1&&this._listeners[name].splice(idx,1)}},_handleMessage:function(event){if(event.data&&"sfmc:response"===event.data.type){var payload=event.data.payload;if(payload&&payload.name){var listeners=this._listeners[payload.name]||[];listeners.forEach(function(handler){handler(payload.data)})}}}},typeof window<"u"&&window.addEventListener("message",function(event){Session.prototype._handleMessage.call(Session.prototype,event)}),{Session:Session}});
